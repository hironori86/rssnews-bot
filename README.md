\# DXニュース自動収集・配信アプリ



このアプリケーションは、生成AI、BIツール、DX（デジタルトランスフォーメーション）に関する最新ニュースを自動で収集し、要約して Microsoft Teams に通知します。さらに、注目トピックから Twitter(X) 投稿案や note 記事案を生成し、オプションにより実際に投稿まで行います。

**🚀 GitHub Actions対応**: 毎日朝8時（JST）に自動実行し、週次サマリーも自動生成します。



\## 特長



\- \*\*RSS フィード対応\*\* — 複数の RSS URL から直近7日間の記事を取得します。将来的に NewsAPI への切替を想定した構造になっています。

\- \*\*キーワード絞り込み\*\* — `生成AI`、`BIツール`、`DX` などのキーワードで関連ニュースを抽出します。

\- \*\*重複クラスタリング\*\* — 似たタイトルの記事をまとめ、重複を排除します。

\- \*\*OpenAI GPT‑4o mini による要約\*\* — 各記事を200字以内で日本語要約します。

\- \*\*Teams への通知\*\* — Markdown リスト形式で要約結果を投稿します。

\- \*\*トピック抽出とコンテンツ生成\*\* — 代表的な3〜5件を選び、Twitter向け 280 字ツイート案と note 向け 800〜1200 字記事を生成します。

\- \*\*スケジュール実行\*\* — `.env` で指定した曜日・時刻に自動実行。CLI から `--run-now` オプションで手動実行も可能です。

\- \*\*実投稿オプション\*\* — `--post` を付けると、生成したツイートと記事を実際に Twitter(X) と note に投稿します。

\- \*\*文案ファイル出力\*\* — 生成されたツイート案とnote記事案を自動的にファイルに保存。outputs/[タイムスタンプ]/ 配下に整理して保存されます。

\- \*\*記事のカテゴリ分類\*\* — RSS記事を「最新技術動向」「導入・活用事例」「その他」の3つのカテゴリに自動分類。

\- \*\*週次サマリー形式\*\* — 1週間分のニュースをまとめた投稿文案を生成。期間表示と注目トピック3つを含む魅力的な内容。

\- \*\*メール配信機能\*\* — 登録されたメールアドレスに週次レポートをHTML/テキスト形式で自動送信。

\- \*\*LINE通知機能\*\* — LINE Messaging APIを使用して、週次レポートをFlexメッセージ形式で配信。

\- \*\*GitHub Actions自動実行\*\* — 毎日朝8時（JST）に日次ニュース収集、週1回の週間サマリー生成を自動実行。

\- \*\*日次・週次運用対応\*\* — 日次データの蓄積から週間ニュースを自動生成する効率的な運用システム。



\## 動作環境



\- Python \*\*3.12\*\* 以上

\- 外部インターネットへアクセス可能な環境（RSS 取得や OpenAI API 呼び出しに使用）



\## セットアップ手順



1\. このリポジトリをクローンまたはダウンロードします。

2\. Python 仮想環境を作成し、依存パッケージをインストールします。



&nbsp;  ```bash

&nbsp;  python3.12 -m venv venv

&nbsp;  source venv/bin/activate

&nbsp;  pip install -r requirements.txt

3\. 環境変数を設定します（`.env` ファイルを作成）。

4\. ローカル実行またはGitHub Actionsを設定します。

## GitHub Actions 自動実行

### セットアップ

1\. **GitHub Secretsの設定**: リポジトリの Settings > Secrets and variables > Actions で以下を設定

   | Secret名 | 説明 | 必須 |
   |---------|------|-----|
   | `OPENAI_API_KEY` | OpenAI APIキー | ✅ |
   | `RSS_FEEDS` | RSSフィードURL（カンマ区切り） | ✅ |
   | `KEYWORDS` | 検索キーワード（カンマ区切り） | ✅ |
   | `TEAM_WEBHOOK_URL` | Teams Webhook URL | - |
   | その他の通知設定 | Twitter, note, Email, LINE等 | - |

2\. **ワークフローの有効化**: GitHub ActionsタブでワークフローをEnable

### 実行スケジュール

- **日次実行**: 毎日朝8時（JST）に自動実行
- **週次実行**: 毎週日曜日夜10時（JST）に週間サマリー生成

### 手動実行

- **Actions** タブから「Run workflow」で手動実行可能
- テスト実行時は「SNSに実際に投稿するか」を `false` に設定

### 生成ファイルの取得

- 実行完了後、**Artifacts** からファイルをダウンロード
- noteにそのままコピー&ペースト可能な形式で保存

詳細な設定方法は `GITHUB_ACTIONS_SETUP.md` を参照してください。

## ローカル実行

### 日次実行
```bash
# 日次ニュース収集（投稿案のみ生成）
python main.py --run-now

# 実際に投稿も行う場合
python main.py --run-now --post
```

### 週間サマリー生成
```bash
# 過去7日分から週間ニュース生成
python weekly_generator.py

# Windows: バッチファイル実行
generate_weekly.bat
```

## ファイル構造

```
outputs/
├── daily/              # 日次データ
│   └── 20241201/
│       └── 20241201_143022/
│           ├── tweets/  # 日次ツイート案
│           ├── notes/   # 日次note記事案
│           └── raw_data/# 週間集計用データ
└── weekly/             # 週間データ
    └── 20241125_20241201/
        └── 20241201_150000/
            ├── tweets/  # 週間ツイート案
            └── notes/   # 週間note記事案
```


